<ion-header>
  <ion-navbar color="secondary">
      <ion-buttons start>
        <button ion-button icon-only (click)="dismiss()">
          <ion-icon name="md-arrow-back"></ion-icon>
        </button>
      </ion-buttons>
    <ion-title>
      CIRA - View Post
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  
  <ion-fab left bottom>
    <button ion-fab [hidden]="new" (click)="delete()"><ion-icon name="trash"></ion-icon></button>
  </ion-fab>
  
  <ion-fab right bottom [hidden]="edit || new">
    <button ion-fab (click)="toggleEdit(true)"><ion-icon name="brush"></ion-icon></button>
  </ion-fab>

  <ion-fab right bottom [hidden]="!edit || new">
    <button ion-fab (click)="toggleEdit(false)"><ion-icon name="close"></ion-icon></button>
  </ion-fab>
  
  <ion-card>
      <ion-card-content>
        <ion-card-title>
          <ion-buttons [hidden]="!edit" right>
            <app-form-control-valid-prompt [valid]="reportInfoForm.valid"></app-form-control-valid-prompt>
            <button ion-button icon-only (click)="editReport('Info')">
              <ion-icon name="brush"></ion-icon>
            </button>
          </ion-buttons>
          Blotter #{{ (report?.blotterNo) || "N/A" }} ({{ (report?.publishStatus | uppercase) || "New Report" }})
        </ion-card-title>
        <p>Incident Type: <span>{{ (report?.incidentType) || invalidate() }}</span></p>
        <p>Incident Location: {{report?.incidentLocation || invalidate() }}</p>
        <p>Incident Date & Time: {{(report?.incidentDateAndTime | date: 'dd/MM/yyyy HH:mm') || invalidate() }}</p>
        <p>Incident Status: {{ (report?.status | uppercase) || invalidate() }}</p>
        <p>Created On: {{ report?.createdOn | date: 'dd/MM/yyyy HH:mm' || "n/a" }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-content>
        <ion-card-title>
        <ion-buttons [hidden]="!edit" right>
          <app-form-control-valid-prompt [valid]="reportTypeAForm.valid"></app-form-control-valid-prompt>
          <button ion-button icon-only (click)="editReport('Type A')">
            <ion-icon name="brush"></ion-icon>
          </button>
        </ion-buttons>
         Type A (Reporting Person Data)
        </ion-card-title>
        <h3><strong>Personal Info:</strong></h3>
        <p>Family Name: {{ report?.typeA.name.familyName || invalidate() }}</p>
        <p>First Name: {{ report?.typeA.name.firstName  || invalidate() }}</p>
        <p>Middle Name: {{ report?.typeA.name.middleName  }}</p>
        <p>Qualifier: {{ report?.typeA.name.qualifier  }}</p>
        <p>Nickname: {{ report?.typeA.name.nickName  }}</p>
        <p>Citizenship: {{ report?.typeA.citizenship  || invalidate() }}</p>      
        <p>Sex: {{ report?.typeA.sex  || invalidate() }}</p>
        <p>Civil Status: {{ report?.typeA.civilStatus  || invalidate() }}</p>
        <p>Birth Date: {{ report?.typeA.birthDate || invalidate() }}</p>
        <p>Age {{ report?.typeA.age || invalidate() }}</p>
        <p>Place of Birth: {{ report?.typeA.birthPlace || invalidate() }}</p>
        <br>
        <h3><strong>Current Address:</strong></h3>
        <p>House Number/Street: {{ report?.typeA.currentAddress.houseNumber || invalidate() }}</p>
        <p>Village/SITIO: {{ report?.typeA.currentAddress.village  || invalidate() }}</p>
        <p>Barangay: {{ report?.typeA.currentAddress.barangay  || invalidate() }}</p>
        <p>Town/City: {{ report?.typeA.currentAddress.town  || invalidate() }}</p>
        <p>Province: {{ report?.typeA.currentAddress.province  || invalidate() }}</p>
        <br>
        <h3><strong>Other Address:</strong></h3>
        <p>House Number/Street: {{ report?.typeA.otherAddress.houseNumber }}</p>
        <p>Village/SITIO: {{ report?.typeA.otherAddress.village  }}</p>
        <p>Barangay: {{ report?.typeA.otherAddress.barangay  }}</p>
        <p>Town/City: {{ report?.typeA.otherAddress.town  }}</p>
        <p>Province: {{ report?.typeA.otherAddress.province  }}</p>
        <br>
        <h3><strong>Other Information:</strong></h3>
        <p>Highest Educatioal Attainment: {{ report?.typeA.highestEducationalAttainment || invalidate() }}</p>
        <p>Occupation: {{ report?.typeA.occupation }}</p>
        <p>ID Card Presented: {{ report?.typeA.idCardPresented  || invalidate() }}</p>
        <br>
        <h3><strong>Contact Info:</strong></h3>
        <p>Email Address: {{ report?.typeA.contactInfo.emailAddress }}</p>
        <p>Home Phone: {{ report?.typeA.contactInfo.homePhone  }}</p>
        <p>Mobile Phone: {{ report?.typeA.contactInfo.mobilePhone  || invalidate() }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-content>
        <ion-card-title>
          <ion-buttons [hidden]="!edit" right>
            <app-form-control-valid-prompt [valid]="reportTypeBForm.valid"></app-form-control-valid-prompt>
            <button ion-button icon-only (click)="editReport('Type B')">
              <ion-icon name="brush"></ion-icon>
            </button>
          </ion-buttons>
         Type B (Suspect Data)
        </ion-card-title>
        <h3><strong>Personal Info:</strong></h3>
        <p>Family Name: {{ report?.typeB.name.familyName || invalidate() }}</p>
        <p>First Name: {{ report?.typeB.name.firstName  || invalidate() }}</p>
        <p>Middle Name: {{ report?.typeB.name.middleName }}</p>
        <p>Qualifier: {{ report?.typeB.name.qualifier }}</p>
        <p>Nickname: {{ report?.typeB.name.nickName }}</p>
        <p>Citizenship: {{ report?.typeB.citizenship  || invalidate() }}</p>      
        <p>Sex: {{ report?.typeB.sex  || invalidate() }}</p>
        <p>Civil Status: {{ report?.typeB.civilStatus  || invalidate() }}</p>
        <p>Birth Date: {{ report?.typeB.birthDate || invalidate() }}</p>
        <p>Age {{ report?.typeB.age || invalidate() }}</p>
        <p>Place of Birth: {{ report?.typeB.birthPlace || invalidate() }}</p>
        <br>
        <h3><strong>Current Address:</strong></h3>
        <p>House Number/Street: {{ report?.typeB.currentAddress.houseNumber || invalidate() }}</p>
        <p>Village/SITIO: {{ report?.typeB.currentAddress.village  || invalidate() }}</p>
        <p>Barangay: {{ report?.typeB.currentAddress.barangay  || invalidate() }}</p>
        <p>Town/City: {{ report?.typeB.currentAddress.town  || invalidate() }}</p>
        <p>Province: {{ report?.typeB.currentAddress.province  || invalidate() }}</p>
        <br>
        <h3><strong>Other Address:</strong></h3>
        <p>House Number/Street: {{ report?.typeB.otherAddress.houseNumber }}</p>
        <p>Village/SITIO: {{ report?.typeB.otherAddress.village  }}</p>
        <p>Barangay: {{ report?.typeB.otherAddress.barangay  }}</p>
        <p>Town/City: {{ report?.typeB.otherAddress.town  }}</p>
        <p>Province: {{ report?.typeB.otherAddress.province  }}</p>
        <br>
        <h3><strong>Other Info:</strong></h3>
        <p>Highest Educatioal Attainment: {{ report?.typeB.highestEducationalAttainment || invalidate() }}</p>
        <p>Occupation: {{ report?.typeB.occupation  }}</p>
        <p>Work Address: {{ report?.typeB.workAddress  }}</p>
        <p>Relation to Victim: {{ report?.typeB.relationToVictim  || invalidate() }}</p>
        <p>Email Address: {{ report?.typeB.emailAddress }}</p>
        <p>If AFP/PNP Personel, Rank: {{ report?.typeB.govRank }}</p>
        <p>Unit Assignment: {{ report?.typeB.unitAssignment }}</p>
        <p>Group Affiliation: {{ report?.typeB.groupAffiliation }}</p>
        <p>With Previous Record?: {{ report?.typeB.previousRecord  || invalidate() }}</p>
        <p>Previous Record Status: {{ report?.typeB.recordStatus }}</p>
        <br>
        <h3><strong>Bio-Data:</strong></h3>
        <p>Height: {{ report?.typeB.bioData.height || invalidate() }}</p>
        <p>Weight: {{ report?.typeB.bioData.weight || invalidate() }}</p>
        <p>Eye Color: {{  report?.typeB.bioData.eyeColor || invalidate() }}</p>
        <p>Eye Description: {{ report?.typeB.bioData.eyeDescription || invalidate() }}</p>
        <p>Hair Color: {{ report?.typeB.bioData.hairColor || invalidate() }}</p>
        <p>Hair Description: {{ report?.typeB.bioData.hairDescription || invalidate() }}</p>
        <p>Under the Influence: {{ report?.typeB.bioData.influence || invalidate() }}</p>
        <br>
        <h3><strong>For Children In Conflit with the Law:</strong></h3>
        <p>Guardian Name: {{ report?.typeB.children.guardianName }}</p>
        <p>Guardian Address: {{ report?.typeB.children.guardianAddress }}</p>
        <p>Home Phone: {{ report?.typeB.children.homePhone }}</p>
        <p>Mobile Phone: {{ report?.typeB.children.mobilePhone }}</p>
        <br>
        <h3><strong>Other Distinguishing Features:</strong></h3>
        <p>{{ report?.typeB.otherDistinguishingFeatures || invalidate() }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-content>
        <ion-card-title>
        <ion-buttons [hidden]="!edit" right>
          <app-form-control-valid-prompt [valid]="reportTypeCForm.valid"></app-form-control-valid-prompt>
          <button ion-button icon-only (click)="editReport('Type C')">
            <ion-icon name="brush"></ion-icon>
          </button>
        </ion-buttons>
         Type C (Victim Data)
        </ion-card-title>
        <h3><strong>Personal Info:</strong></h3>
        <p>Family Name: {{ report?.typeC.name.familyName }}</p>
        <p>First Name: {{ report?.typeC.name.firstName  }}</p>
        <p>Middle Name: {{ report?.typeC.name.middleName  }}</p>
        <p>Qualifier: {{ report?.typeC.name.qualifier  }}</p>
        <p>Nickname: {{ report?.typeC.name.middleName  }}</p>
        <p>Nickname: {{ report?.typeC.name.middleName  }}</p>
        <p>Citizenship: {{ report?.typeC.citizenship  }}</p>      
        <p>Sex: {{ report?.typeC.sex  }}</p>
        <p>Civil Status: {{ report?.typeC.civilStatus  }}</p>
        <p>Birth Date: {{ report?.typeC.birthDate }}</p>
        <p>Age {{ report?.typeC.age }}</p>
        <p>Place of Birth: {{ report?.typeC.birthPlace }}</p>
        <br>
        <h3><strong>Current Address:</strong></h3>
        <p>House Number/Street: {{ report?.typeC.currentAddress.houseNumber }}</p>
        <p>Village/SITIO: {{ report?.typeC.currentAddress.village  }}</p>
        <p>Barangay: {{ report?.typeC.currentAddress.barangay  }}</p>
        <p>Town/City: {{ report?.typeC.currentAddress.town  }}</p>
        <p>Province: {{ report?.typeC.currentAddress.province  }}</p>
        <br>
        <h3><strong>Other Address:</strong></h3>
        <p>House Number/Street: {{ report?.typeC.otherAddress.houseNumber }}</p>
        <p>Village/SITIO: {{ report?.typeC.otherAddress.village  }}</p>
        <p>Barangay: {{ report?.typeC.otherAddress.barangay  }}</p>
        <p>Town/City: {{ report?.typeC.otherAddress.town  }}</p>
        <p>Province: {{ report?.typeC.otherAddress.province  }}</p>
        <br>
        <h3><strong>Educational Info:</strong></h3>
        <p>Highest Educatioal Attainment: {{ report?.typeC.highestEducationalAttainment }}</p>
        <p>Occupation: {{ report?.typeC.occupation  }}</p>
        <p>ID Card Presented: {{ report?.typeC.idCardPresented  }}</p>
        <br>
        <h3><strong>Contact Info:</strong></h3>
        <p>Email Address: {{ report?.typeC.contactInfo.emailAddress }}</p>
        <p>Home Phone: {{ report?.typeC.contactInfo.homePhone  }}</p>
        <p>Mobile Phone: {{ report?.typeC.contactInfo.mobilePhone  }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-content>
        <ion-card-title>
          <ion-buttons [hidden]="!edit" right>
            <app-form-control-valid-prompt [valid]="reportTypeDForm.valid"></app-form-control-valid-prompt>
            <button ion-button icon-only (click)="editReport('Type D')">
              <ion-icon name="brush"></ion-icon>
            </button>
          </ion-buttons>
          Type D (Narrative of Incident)
        </ion-card-title>
        <h3><strong>Incident Narrative:</strong></h3>
        <p>{{ report?.typeD.incidentNarrative || invalidate() }}</p>        
      </ion-card-content>
    </ion-card>

</ion-content>


<ion-footer [hidden]="!edit">
  <button class="form-action-button" ion-button block (click)="submit( true )" [hidden]="published"  [disabled]="!reportInfoForm.valid">Save Draft</button>
  <button class="form-action-button" ion-button block (click)="submit( false )" [disabled]="!reportInfoForm.valid || !reportTypeAForm.valid || !reportTypeAForm.valid || !reportTypeBForm.valid || !reportTypeCForm.valid || !reportTypeDForm.valid">Publish</button>
</ion-footer>